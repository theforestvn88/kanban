<div 
    data-controller="kanban-board"
    data-kanban-board-name-value="<%= board_configs.kanban_name %>"
    data-action="dragstart->kanban-board#dragStart dragover->kanban-board#dragOver dragleave->kanban-board#dragLeave dragenter->kanban-board#dragEnter drop->kanban-board#drop dragEnd->kanban-board#dragEnd"
    class="board">
  <div class="p-14 mt-16">
    
    <% render partial: board_configs.header_board_partial, locals: {board_configs.board_model_symbol => board} %>

    <div id="lists" class="lists">
        <% lists.each_with_index do |list, i| %>
            <%= render "kanban7/lists/list", list: list, prev: position(lists[i-1], i-1), board: board, board_configs: board_configs %>
        <% end %>

        <% unless board_configs.is_fixed_lists? %>
          
          <%= turbo_frame_tag "edit-list" do %>
            <button data-kanban-board-target="addListBtn" data-action="kanban-board#showListForm" class="add-list-btn"
                draggable="false"
                droppable="true"
                id="list_board<%= board.id %>"
                data-viewtype="list"
                data-currpos="" 
                data-prevpos="<%= position(lists.last) %>">
              + Add another list
            </button>
            
            <div class="hidden"
                id="board<%= board.id %>-form-list"
                data-kanban-board-target="formList"
                draggable="false"
                droppable="false">
                <%= render partial: board_configs.form_list_partial, 
                    locals: {
                      board_configs.board_model_symbol => board, 
                      board_configs.list_model_symbol => board_configs.list_model.new(board_configs.board_model_symbol => board)
                    } 
                %>
            </div>
          <% end %>
        <% end %>
    </div>
  </div>
</div>